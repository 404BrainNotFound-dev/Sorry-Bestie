<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Flappy Bird â€” Fixed</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0;touch-action:manipulation}
  html,body{height:100%}
  body{
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(to bottom,#64b3f4,#c2e59c);
    font-family:Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
    -webkit-tap-highlight-color:transparent;
  }
  #game-container{
    position:relative;width:360px;height:640px;border-radius:12px;overflow:hidden;
    box-shadow:0 20px 50px rgba(0,0,0,.3);
    -webkit-user-select:none;user-select:none;
  }
  #game-canvas{position:absolute;left:0;top:0;width:100%;height:100%}
  #start-screen,#game-over-screen,#leaderboard-screen,#difficulty-screen{
    position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;
    justify-content:center;background:rgba(112,197,206,.85);z-index:10;
  }
  #game-over-screen,#leaderboard-screen,#difficulty-screen{display:none}
  h1{font-size:48px;color:#f1c40f;text-shadow:3px 3px 0 #e74c3c,6px 6px 0 rgba(0,0,0,.2)}
  h2{font-size:36px;color:#e74c3c;margin-bottom:6px}
  .score-display{font-size:28px;color:#fff;font-weight:700}
  .highscore-display{font-size:18px;color:#f1c40f;margin-bottom:10px}
  .btn{
    background:linear-gradient(to bottom,#f1c40f,#e67e22);border:none;border-radius:50px;padding:12px 28px;
    font-weight:700;color:#fff;cursor:pointer;margin-top:12px;box-shadow:0 4px 0 #d35400;
    -webkit-tap-highlight-color:transparent;
  }
  #score{position:absolute;top:16px;left:0;width:100%;text-align:center;font-size:60px;font-weight:700;color:#fff;z-index:5;display:none;text-shadow:3px 3px 0 rgba(0,0,0,.3)}
  .sound-btn{position:absolute;top:12px;right:12px;background:rgba(255,255,255,.8);border-radius:50%;width:40px;height:40px;border:none;z-index:20}
  #modi-image{position:absolute;z-index:15;left:0;top:0;width:100%;height:100%;display:none}
  .leaderboard-item{display:flex;justify-content:space-between;width:80%;max-width:280px;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.3);}
</style>
</head>
<body>
  <div id="game-container">
    <canvas id="game-canvas"></canvas>
    <div id="score">0</div>
    <button id="sound-btn" class="sound-btn">ðŸ”Š</button>
    <img id="modi-image" src="modi.jpg" alt="Game Over">

    <div id="start-screen">
      <h1>FLAPPY BIRD</h1>
      <button id="play-btn" class="btn">Play</button>
      <button id="leaderboard-btn" class="btn">Leaderboard</button>
    </div>

    <div id="leaderboard-screen">
      <h2>LEADERBOARD</h2>
      <div class="leaderboard-item">
        <span>Usman</span>
        <span>69</span>
      </div>
      <div class="leaderboard-item">
        <span>You</span>
        <span id="player-highscore">0</span>
      </div>
      <button id="back-btn" class="btn">Back</button>
    </div>

    <div id="difficulty-screen">
      <h2>SELECT DIFFICULTY</h2>
      <button id="easy-btn" class="btn">Easy Mode</button>
      <button id="back-difficulty-btn" class="btn">Back</button>
    </div>

    <div id="game-over-screen">
      <h2>GAME OVER</h2>
      <div class="score-display">Score: <span id="final-score">0</span></div>
      <div class="highscore-display">High Score: <span id="final-highscore">0</span></div>
      <button id="restart-btn" class="btn">Play Again</button>
      <button id="menu-btn" class="btn">Main Menu</button>
    </div>
  </div>

<script>
/* =========================
   CONFIG / STATE
   ========================= */
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');
canvas.width = 360; canvas.height = 640;

const startScreen = document.getElementById('start-screen');
const gameOverScreen = document.getElementById('game-over-screen');
const leaderboardScreen = document.getElementById('leaderboard-screen');
const difficultyScreen = document.getElementById('difficulty-screen');
const playBtn = document.getElementById('play-btn');
const leaderboardBtn = document.getElementById('leaderboard-btn');
const backBtn = document.getElementById('back-btn');
const easyBtn = document.getElementById('easy-btn');
const backDifficultyBtn = document.getElementById('back-difficulty-btn');
const restartBtn = document.getElementById('restart-btn');
const menuBtn = document.getElementById('menu-btn');
const scoreDisplay = document.getElementById('score');
const finalScoreDisplay = document.getElementById('final-score');
const highscoreSpan = document.getElementById('player-highscore');
const finalHighscoreSpan = document.getElementById('final-highscore');
const soundBtn = document.getElementById('sound-btn');
const modiImage = document.getElementById('modi-image');

// EASIER GAME SETTINGS:
const GRAVITY = 0.5;
const FLAP_STRENGTH = -8;
const PIPE_SPEED = 2.5;
const PIPE_GAP = 240;
const PIPE_WIDTH = 70;
const BIRD_SIZE = 34;
const MIN_PIPE_HEIGHT = 60;
const MAX_PIPE_HEIGHT = canvas.height - 80 - PIPE_GAP - 60;
const VOTE_SIZE = 25;

let bird = { x: 100, y: canvas.height/2, velocity: 0, radius: BIRD_SIZE/2 };
let pipes = [];
let votes = [];
let clouds = [];
let frames = 0;
let score = 0;
let highscore = 0;
let gameRunning = false;
let gameStarted = false;
let soundsEnabled = true;
let bgMusic, flapSound, pointSound, deathSound, collectSound;
let audioInitialized = false;
let gracePeriod = false;
let gracePeriodTimer = null;
let pipeCountSinceLastVote = 0;

// Load background image
const backgroundImage = new Image();
backgroundImage.src = "background.jpeg";

// Load bird image
const birdImage = new Image();
birdImage.src = "head.png";

// Load vote image (using a simple circle as placeholder since no image provided)
// In practice, you would replace this with an actual vote image
const voteImage = new Image();
voteImage.src = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSIyMCIgZmlsbD0iI2ZmZDIwMCIgc3Ryb2tlPSIjZmY5ODAwIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB4PSIyNSIgeT0iMzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iI2ZmNjYwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSI+4piP4pifPC90ZXh0Pjwvc3ZnPg==";

/* preload obstacle image */
const obstacleImage = new Image();
obstacleImage.src = "obstacle.jpg";
obstacleImage.onerror = () => console.log('Obstacle image failed to load');

/* clouds init */
for (let i=0;i<5;i++){
  clouds.push({ x:Math.random()*canvas.width, y:Math.random()*200, w:40+Math.random()*50, h:20+Math.random()*20, s:0.4+Math.random()*0.7 });
}

/* highscore load */
try {
  const saved = localStorage.getItem('flappyBirdHighscore');
  if (saved!==null) highscore = parseInt(saved,10)||0;
} catch(e){ highscore = 0; }
highscoreSpan.textContent = highscore;
finalHighscoreSpan.textContent = highscore;

/* =========================
   AUDIO
   ========================= */
function initAudio(){
  if (audioInitialized) return;
  audioInitialized = true;
  try {
    bgMusic = new Audio("bg.mp3");
    bgMusic.loop = true; 
    bgMusic.volume = 0.6;
    
    deathSound = new Audio("death.mp3");
    deathSound.playbackRate = 1.5;
    
    collectSound = new Audio("collect.mp3");
    
    flapSound = new Audio();
    flapSound.src = "audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNhAMRarw769vGwY5m9/0unEiAg9PsvfwpV8ZAEiZ5fawbR4A";
    pointSound = new Audio();
    pointSound.src = "audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQgAAAAAAAAAAAAAAAD//wIA/f8DAPv/AwD5/wQA9/8FAPX/BgDz/wcA8f8IAPP/CADw/wkA7v8KAO3/CwDr/wsA6v8MAOn/DADo/wwA5/8NAOb/DQDl/w0A5P8OAOX/DQDm/w0A5/8MAOj/DADq/w0A6/8MAOz/CwDt/wsA7f8MAO7/CwDv/wsA8f8KAPH/CgDy/woA8/8JAPP/CQD0/wkA9f8JAPT/CQD2/wkA9/8JAPT/CQD2/wkA9/8JAPj/CQD4/wkA+f8JAPn/CQD6/wkA+/8JAPv/CQD8/wkA/v8JAP3/CQD+/wkA/v8JAP7/CQD//wkA//8JAP//CQA=";
  } catch(e){ 
    console.log('audio init error',e); 
    soundsEnabled = false; 
  }
}

/* =========================
   GAME UTILITIES
   ========================= */
function playBackgroundMusic(){
  if (!soundsEnabled || !bgMusic) return;
  bgMusic.play().catch(()=>{});
}
function stopBackgroundMusic(){ if (bgMusic){ bgMusic.pause(); bgMusic.currentTime = 0; } }
function playFlap(){ 
  if (soundsEnabled && flapSound){ 
    flapSound.currentTime = 0; 
    flapSound.play().catch(()=>{}); 
  } 
}
function playPoint(){ 
  if (soundsEnabled && pointSound){ 
    pointSound.currentTime = 0; 
    pointSound.play().catch(()=>{}); 
  } 
}
function playDeath(){ 
  if (soundsEnabled && deathSound){ 
    deathSound.currentTime = 0; 
    deathSound.play().catch(()=>{}); 
  } 
}
function playCollect(){ 
  if (soundsEnabled && collectSound){ 
    collectSound.currentTime = 0; 
    collectSound.play().catch(()=>{}); 
  } 
}

/* show death screen - keep it visible while death sound is playing */
function showDeathScreen(){
  modiImage.style.display = 'block';
  
  // Keep death image visible while death sound is playing
  if (soundsEnabled && deathSound) {
    // Listen for when the death sound ends
    const handleDeathEnd = () => {
      modiImage.style.display = 'none';
      deathSound.removeEventListener('ended', handleDeathEnd);
      deathSound.removeEventListener('pause', handleDeathEnd);
    };
    
    // Add event listeners for sound completion
    deathSound.addEventListener('ended', handleDeathEnd);
    deathSound.addEventListener('pause', handleDeathEnd);
    
    // Fallback timeout in case event listeners don't work
    setTimeout(() => {
      if (modiImage.style.display !== 'none') {
        modiImage.style.display = 'none';
        deathSound.removeEventListener('ended', handleDeathEnd);
        deathSound.removeEventListener('pause', handleDeathEnd);
      }
    }, 5000); // 5 second max timeout
  } else {
    // If no sound, show for 1.4 seconds as before
    setTimeout(() => { modiImage.style.display = 'none'; }, 1400);
  }
}

/* create pipe */
function createPipe(){
  const topH = Math.floor(MIN_PIPE_HEIGHT + Math.random() * Math.max(0, (MAX_PIPE_HEIGHT - MIN_PIPE_HEIGHT)));
  const tilt = (Math.random()-0.5)*8;
  pipes.push({ x: canvas.width, topHeight: topH, passed:false, tilt });
  
  // Check if we should create a vote collectable
  pipeCountSinceLastVote++;
  const pipesNeededForVote = 5 + Math.floor(Math.random() * 5); // 5-9 pipes
  
  if (pipeCountSinceLastVote >= pipesNeededForVote) {
    // Create vote at a random position between pipes
    const voteY = topH + Math.random() * (PIPE_GAP - VOTE_SIZE);
    votes.push({ 
      x: canvas.width + 150, // Spawn ahead of the pipe
      y: voteY,
      collected: false
    });
    pipeCountSinceLastVote = 0;
  }
}

/* reset game state */
function resetGame(){
  bird = { x:100, y:canvas.height/2, velocity:0, radius:BIRD_SIZE/2 };
  pipes = []; 
  votes = [];
  frames = 0; 
  score = 0;
  pipeCountSinceLastVote = 0;
  scoreDisplay.textContent = '0';
  modiImage.style.display = 'none';
  gracePeriod = true;
  if (gracePeriodTimer) clearTimeout(gracePeriodTimer);
  gracePeriodTimer = setTimeout(() => {
    gracePeriod = false;
  }, 1500);
}

/* =========================
   DRAW / UPDATE
   ========================= */
function drawClouds(){
  ctx.fillStyle = 'rgba(255,255,255,0.85)';
  clouds.forEach(c=>{
    ctx.beginPath();
    ctx.arc(c.x, c.y, c.w*0.28,0,Math.PI*2);
    ctx.arc(c.x+c.w*0.26, c.y - c.h*0.18, c.w*0.24,0,Math.PI*2);
    ctx.arc(c.x + c.w*0.5, c.y, c.w*0.32,0,Math.PI*2);
    ctx.fill();
  });
}
function updateClouds(){ clouds.forEach(c=>{ c.x -= c.s; if (c.x + c.w < 0){ c.x = canvas.width + 20; c.y = Math.random()*180; } }); }

function drawBird(){
  // Add highlight effect
  ctx.shadowColor = 'rgba(255, 255, 255, 0.8)';
  ctx.shadowBlur = 10;
  ctx.shadowOffsetX = 2;
  ctx.shadowOffsetY = 2;
  
  if (birdImage.complete && birdImage.naturalWidth > 0) {
    // Draw bird image centered on bird position
    ctx.drawImage(birdImage, bird.x - BIRD_SIZE/2, bird.y - BIRD_SIZE/2, BIRD_SIZE, BIRD_SIZE);
  } else {
    // Fallback to original bird drawing
    ctx.fillStyle = '#ffd700';
    ctx.beginPath(); ctx.arc(bird.x, bird.y, bird.radius, 0, Math.PI*2); ctx.fill();
    ctx.fillStyle = '#000'; ctx.beginPath(); ctx.arc(bird.x + 8, bird.y - 6, 4.5, 0, Math.PI*2); ctx.fill();
    ctx.fillStyle = '#ff8c00'; ctx.beginPath(); ctx.moveTo(bird.x + 18, bird.y); ctx.lineTo(bird.x + 30, bird.y - 7); ctx.lineTo(bird.x + 30, bird.y + 7); ctx.closePath(); ctx.fill();
    ctx.fillStyle = '#ff6b00'; ctx.beginPath(); ctx.ellipse(bird.x - 2, bird.y + 4, 9, 7, 0, 0, Math.PI*2); ctx.fill();
  }
  
  // Reset shadow
  ctx.shadowColor = 'transparent';
  ctx.shadowBlur = 0;
  ctx.shadowOffsetX = 0;
  ctx.shadowOffsetY = 0;
}

function drawPipes(){
  pipes.forEach(pipe=>{
    // Add highlight effect for pipes
    ctx.shadowColor = 'rgba(255, 255, 255, 0.6)';
    ctx.shadowBlur = 8;
    ctx.shadowOffsetX = 1;
    ctx.shadowOffsetY = 1;
    
    ctx.save();
    if (pipe.tilt){
      const cx = pipe.x + PIPE_WIDTH/2, cy = pipe.topHeight + PIPE_GAP/2;
      ctx.translate(cx, cy);
      ctx.rotate(pipe.tilt * Math.PI/180);
      ctx.translate(-cx, -cy);
    }
    // top
    if (obstacleImage.complete && obstacleImage.naturalWidth > 0){
      ctx.drawImage(obstacleImage, pipe.x, 0, PIPE_WIDTH, pipe.topHeight);
    } else {
      ctx.fillStyle = '#27ae60';
      ctx.fillRect(pipe.x, 0, PIPE_WIDTH, pipe.topHeight);
      ctx.fillStyle = '#2ecc71';
      ctx.fillRect(pipe.x - 2, pipe.topHeight - 15, PIPE_WIDTH + 4, 15);
    }
    // bottom
    const bottomHeight = canvas.height - (pipe.topHeight + PIPE_GAP);
    if (obstacleImage.complete && obstacleImage.naturalWidth > 0){
      ctx.drawImage(obstacleImage, pipe.x, pipe.topHeight + PIPE_GAP, PIPE_WIDTH, bottomHeight);
    } else {
      ctx.fillStyle = '#27ae60';
      ctx.fillRect(pipe.x, pipe.topHeight + PIPE_GAP, PIPE_WIDTH, bottomHeight);
      ctx.fillStyle = '#2ecc71';
      ctx.fillRect(pipe.x - 2, pipe.topHeight + PIPE_GAP, PIPE_WIDTH + 4, 15);
    }
    ctx.restore();
    
    // Reset shadow
    ctx.shadowColor = 'transparent';
    ctx.shadowBlur = 0;
    ctx.shadowOffsetX = 0;
    ctx.shadowOffsetY = 0;
  });
}

function drawVotes(){
  votes.forEach(vote => {
    if (vote.collected) return;
    
    // Add highlight effect for votes
    ctx.shadowColor = 'rgba(255, 210, 0, 0.8)';
    ctx.shadowBlur = 12;
    ctx.shadowOffsetX = 2;
    ctx.shadowOffsetY = 2;
    
    if (voteImage.complete && voteImage.naturalWidth > 0) {
      ctx.drawImage(voteImage, vote.x - VOTE_SIZE/2, vote.y - VOTE_SIZE/2, VOTE_SIZE, VOTE_SIZE);
    } else {
      // Fallback: draw a golden circle with ballot box symbol
      ctx.fillStyle = '#ffd200';
      ctx.beginPath();
      ctx.arc(vote.x, vote.y, VOTE_SIZE/2, 0, Math.PI*2);
      ctx.fill();
      ctx.strokeStyle = '#ff6600';
      ctx.lineWidth = 2;
      ctx.stroke();
      // Draw ballot symbol
      ctx.fillStyle = '#ff6600';
      ctx.font = '12px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('âœ“', vote.x, vote.y);
    }
    
    // Reset shadow
    ctx.shadowColor = 'transparent';
    ctx.shadowBlur = 0;
    ctx.shadowOffsetX = 0;
    ctx.shadowOffsetY = 0;
  });
}

function drawGround(){
  ctx.fillStyle = '#d35400';
  ctx.fillRect(0, canvas.height - 80, canvas.width, 80);
  ctx.fillStyle = '#7d6608';
  ctx.fillRect(0, canvas.height - 80, canvas.width, 4);
  for(let i=0;i<canvas.width;i+=20){ ctx.fillStyle = '#8b4513'; ctx.fillRect(i, canvas.height - 70, 10, 4); }
}

/* update functions */
function updateBird(){
  if (!gracePeriod) {
    bird.velocity += GRAVITY; 
    bird.y += bird.velocity;
  }
  if (bird.y - bird.radius < 0){ bird.y = bird.radius; bird.velocity = 0; }
  if (bird.y + bird.radius > canvas.height - 80){
    triggerGameOver();
  }
}

function updatePipes(){
  if (frames % 100 === 0) createPipe();
  for (let i = pipes.length-1; i >= 0; i--){
    const p = pipes[i];
    p.x -= PIPE_SPEED;
    if (!p.passed && p.x + PIPE_WIDTH < bird.x){ p.passed = true; score++; scoreDisplay.textContent = score; playPoint(); }
    if (p.x + PIPE_WIDTH < 0) pipes.splice(i,1);

    // collision
    if (bird.x + bird.radius > p.x && bird.x - bird.radius < p.x + PIPE_WIDTH){
      if (bird.y - bird.radius < p.topHeight || bird.y + bird.radius > p.topHeight + PIPE_GAP){
        triggerGameOver();
      }
    }
  }
}

function updateVotes(){
  for (let i = votes.length-1; i >= 0; i--){
    const vote = votes[i];
    vote.x -= PIPE_SPEED;
    
    // Check collection
    const distance = Math.sqrt((bird.x - vote.x) ** 2 + (bird.y - vote.y) ** 2);
    if (distance < bird.radius + VOTE_SIZE/2 && !vote.collected) {
      vote.collected = true;
      score += 5; // Bonus points for collecting votes
      scoreDisplay.textContent = score;
      playCollect();
    }
    
    // Remove votes that are off screen
    if (vote.x + VOTE_SIZE/2 < 0) {
      votes.splice(i, 1);
    }
  }
}

/* =========================
   GAME LOOP
   ========================= */
function gameLoop(){
  frames++;
  // Draw background image if loaded, otherwise use solid color
  if (backgroundImage.complete && backgroundImage.naturalWidth > 0) {
    // Apply blur effect to background
    ctx.filter = 'blur(2px) brightness(0.8)';
    ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);
    ctx.filter = 'none'; // Reset filter for game elements
  } else {
    ctx.fillStyle = '#70c5ce';
    ctx.fillRect(0,0,canvas.width,canvas.height);
  }

  if (gameRunning){
    updateClouds(); drawClouds();
    updatePipes(); drawPipes();
    updateVotes(); drawVotes();
    updateBird(); drawBird();
    drawGround();
  } else {
    updateClouds(); drawClouds();
    drawPipes(); drawBird();
    drawVotes();
    drawGround();
  }

  requestAnimationFrame(gameLoop);
}
requestAnimationFrame(gameLoop);

/* =========================
   GAME CONTROL
   ========================= */
function startGame(){
  initAudio();
  difficultyScreen.style.display = 'none';
  gameOverScreen.style.display = 'none';
  scoreDisplay.style.display = 'block';
  resetGame();
  gameRunning = true;
  gameStarted = true;
  playBackgroundMusic();
}

function triggerGameOver(){
  if (!gameRunning) return;
  gameRunning = false;
  stopBackgroundMusic();
  playDeath();
  showDeathScreen();

  finalScoreDisplay.textContent = score;
  if (score > highscore){ highscore = score; try{ localStorage.setItem('flappyBirdHighscore', highscore.toString()); }catch(e){} }
  highscoreSpan.textContent = highscore;
  finalHighscoreSpan.textContent = highscore;
  gameOverScreen.style.display = 'flex';
}

/* controls */
function flap(){
  if (!gameStarted){ 
    return; 
  }
  if (!gameRunning) return;
  bird.velocity = FLAP_STRENGTH;
  playFlap();
}

/* UI handlers */
playBtn.addEventListener('click', () => {
  startScreen.style.display = 'none';
  difficultyScreen.style.display = 'flex';
});

leaderboardBtn.addEventListener('click', () => {
  startScreen.style.display = 'none';
  leaderboardScreen.style.display = 'flex';
});

backBtn.addEventListener('click', () => {
  leaderboardScreen.style.display = 'none';
  startScreen.style.display = 'flex';
});

easyBtn.addEventListener('click', () => {
  startGame();
});

backDifficultyBtn.addEventListener('click', () => {
  difficultyScreen.style.display = 'none';
  startScreen.style.display = 'flex';
});

restartBtn.addEventListener('click', ()=>{ 
  initAudio();
  resetGame(); 
  gameOverScreen.style.display='none'; 
  scoreDisplay.style.display='block'; 
  gameRunning=true; 
  playBackgroundMusic(); 
});

menuBtn.addEventListener('click', ()=>{ 
  gameOverScreen.style.display='none'; 
  startScreen.style.display='flex'; 
  scoreDisplay.style.display='none'; 
  gameRunning=false; 
  stopBackgroundMusic(); 
});

/* sound toggle */
soundBtn.addEventListener('click', ()=>{
  soundsEnabled = !soundsEnabled;
  soundBtn.textContent = soundsEnabled ? 'ðŸ”Š' : 'ðŸ”‡';
  if (!soundsEnabled) stopBackgroundMusic(); else if (gameRunning) playBackgroundMusic();
});

/* input */
canvas.addEventListener('click', (e)=>{ flap(); });
canvas.addEventListener('touchstart', (e)=>{ e.preventDefault(); flap(); }, {passive:false});
document.addEventListener('keydown', (e)=>{ if (e.code === 'Space'){ e.preventDefault(); flap(); } });

</script>
</body>
</html>

